"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[378],{378:function(e,r,t){t.r(r),t.d(r,{default:function(){return x}});var n=t(861),a=t(433),u=t(439),c=t(687),o=t.n(c),s=t(791),i=t(87),f=t(689),l=t(184),p=function(e){var r=e.movies,t=(0,f.TH)();return(0,l.jsx)("ul",{children:r.map((function(e){var r=e.id,n=e.title;return(0,l.jsx)("li",{children:(0,l.jsx)(i.rU,{to:"".concat(r),state:{from:t},children:n})},r)}))})},h=function(e){var r=e.setSearchParams,t=(0,s.useState)(""),n=(0,u.Z)(t,2),a=n[0],c=n[1];return(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.trim()&&(r({query:a.trim().toLowerCase()}),c(""))},children:[(0,l.jsx)("input",{type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",value:a,onChange:function(e){var r=e.currentTarget.value;c(r)}}),(0,l.jsx)("button",{type:"submit",children:(0,l.jsx)("span",{children:"Search"})})]})},m=t(651),d=t(86),v=t(73),x=function(){var e=(0,s.useState)([]),r=(0,u.Z)(e,2),t=r[0],c=r[1],f=(0,s.useState)(m.Q.IDLE),x=(0,u.Z)(f,2),E=x[0],b=x[1],S=(0,i.lr)(),g=(0,u.Z)(S,2),j=g[0],k=g[1],y=(0,s.useMemo)((function(){return Object.fromEntries((0,a.Z)(j))}),[j]).query;function R(e){return e.map((function(e){return{id:e.id,title:e.title}}))}return(0,s.useEffect)((function(){if(y){var e=new AbortController;return y&&function(){r.apply(this,arguments)}(),function(){e.abort()}}function r(){return(r=(0,n.Z)(o().mark((function r(){var t,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,b(m.Q.PENDING),r.next=4,(0,d.v)({controller:e,fetchParams:"search/movie",query:y});case 4:if(t=r.sent,0!==(n=t.results).length){r.next=9;break}return b(m.Q.RESOLVED),r.abrupt("return",v.Am.error("Nothing found!"));case 9:c(R(n)),b(m.Q.RESOLVED),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),"canceled"!==r.t0.message&&(b(m.Q.ERROR),v.Am.error(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))).apply(this,arguments)}}),[y]),(0,l.jsxs)("main",{children:[(0,l.jsx)(h,{setSearchParams:k}),E===m.Q.RESOLVED&&!!t.length&&(0,l.jsx)(p,{movies:t})]})}},86:function(e,r,t){t.d(r,{v:function(){return o}});var n=t(861),a=t(687),u=t.n(a),c=t(243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var o=function(){var e=(0,n.Z)(u().mark((function e(r){var t,n,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.fetchParams,n=r.query,a=void 0===n?null:n,o=r.controller,e.next=3,(0,c.Z)(t,{signal:o.signal,params:{api_key:"fd0a5f8c566fdaa6a63aeafeb4fed4c5",query:a}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},651:function(e,r,t){t.d(r,{Q:function(){return n}});var n={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",ERROR:"error"}}}]);
//# sourceMappingURL=378.961ae6f7.chunk.js.map