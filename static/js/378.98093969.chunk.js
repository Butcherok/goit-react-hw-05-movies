"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[378],{378:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(5861),a=r(3433),u=r(9439),c=r(4687),o=r.n(c),s=r(2791),i=r(1087),l=r(7689),f=r(184),m=function(e){var t=e.movies,r=(0,l.TH)();return(0,f.jsx)("ul",{children:t.map((function(e){var t=e.id,n=e.title;return(0,f.jsx)("li",{children:(0,f.jsx)(i.rU,{to:"".concat(t),state:{from:r},children:n})},t)}))})},h=function(e){var t=e.setSearchParams,r=(0,s.useState)(""),n=(0,u.Z)(r,2),a=n[0],c=n[1];return(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.trim()&&(t({query:a.trim().toLowerCase()}),c(""))},children:[(0,f.jsx)("input",{type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",value:a,onChange:function(e){var t=e.currentTarget.value;c(t)}}),(0,f.jsx)("button",{type:"submit",children:(0,f.jsx)("span",{children:"Search"})})]})},p=r(3585),v=r(3026),d=r(9073),x=function(){var e=(0,s.useState)([]),t=(0,u.Z)(e,2),r=t[0],c=t[1],l=(0,s.useState)(p.Q.IDLE),x=(0,u.Z)(l,2),b=x[0],j=x[1],E=(0,i.lr)(),S=(0,u.Z)(E,2),k=S[0],w=S[1],g=(0,s.useMemo)((function(){return Object.fromEntries((0,a.Z)(k))}),[k]).query;function y(e){return e.map((function(e){return{id:e.id,title:e.title}}))}return(0,s.useEffect)((function(){if(g){var e=new AbortController;return g&&function(){t.apply(this,arguments)}(),function(){e.abort()}}function t(){return(t=(0,n.Z)(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(p.Q.PENDING),t.next=4,(0,v.v)({controller:e,fetchParams:"search/movie",query:g});case 4:if(r=t.sent,0!==(n=r.results).length){t.next=9;break}return j(p.Q.RESOLVED),t.abrupt("return",d.Am.error("Nothing found!"));case 9:c(y(n)),j(p.Q.RESOLVED),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),"canceled"!==t.t0.message&&(j(p.Q.ERROR),d.Am.error(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}}),[g]),(0,f.jsxs)("main",{children:[(0,f.jsx)(h,{setSearchParams:w}),b===p.Q.RESOLVED&&!!r.length&&(0,f.jsx)(m,{movies:r})]})}}}]);
//# sourceMappingURL=378.98093969.chunk.js.map