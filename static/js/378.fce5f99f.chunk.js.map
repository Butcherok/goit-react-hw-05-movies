{"version":3,"file":"static/js/378.fce5f99f.chunk.js","mappings":"uQAcA,EAXmB,WACf,IAAMA,GAAWC,EAAAA,EAAAA,MACnB,OACE,yBACE,yBACE,SAAC,KAAD,CAAMC,GAAI,MAAOC,MAAO,CAAEC,KAAMJ,GAAhC,wBAIP,ECqBD,EA/BmB,SAAC,GAAyB,IAAvBK,EAAsB,EAAtBA,gBACpB,GAAsCC,EAAAA,EAAAA,UAAS,IAA/C,eAAOC,EAAP,KAAoBC,EAApB,KAaA,OACE,kBAAMC,SAZe,SAAAC,GACrBA,EAAEC,iBACGJ,EAAYK,SACjBP,EAAgB,CAAEQ,MAAON,EAAYK,OAAOE,gBAC5CN,EAAe,IAChB,EAOC,WACE,kBACEO,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,gBACZC,MAAOZ,EACPa,SAZiB,SAAAV,GACrB,IAAQS,EAAUT,EAAEW,cAAZF,MACRX,EAAeW,EAChB,KAWG,mBAAQJ,KAAK,SAAb,UACE,yCAIP,E,yBCmDD,EA1EkB,WAEhB,OAA4BT,EAAAA,EAAAA,UAAS,IAArC,eAAOgB,EAAP,KAAeC,EAAf,KACA,GAA4BjB,EAAAA,EAAAA,UAASkB,EAAAA,EAAAA,MAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBvB,EAArB,KAEQQ,GAAUgB,EAAAA,EAAAA,UAChB,kBAAMC,OAAOC,aAAP,OAAuBH,GAA7B,GACA,CAACA,IAFKf,MAmDR,SAASmB,EAAcC,GACrB,OAAOA,EAAKC,KAAI,YACd,MAAO,CAAEC,GADwB,EAAhBA,GACJC,MADoB,EAAZA,MAEtB,GACF,CAGD,OArDAC,EAAAA,EAAAA,YAAU,WACR,GAAKxB,EAAL,CACA,IAAMyB,EAAa,IAAIC,gBA2BvB,OAFI1B,GA3BU,mCA2BH2B,GAEJ,WACLF,EAAWG,OACZ,CA9BiB,CADJ,wCAId,sGAEIf,EAAUF,EAAAA,EAAAA,SAFd,UAG4BkB,EAAAA,EAAAA,GAAY,CAClCJ,WAAAA,EACAK,YAAa,eACb9B,MAAAA,IANN,mBAQ2B,KALhB+B,EAHX,EAGWA,SAKKC,OARhB,uBASMnB,EAAUF,EAAAA,EAAAA,UAThB,kBAUasB,EAAAA,GAAAA,MAAY,mBAVzB,OAYIvB,EAAUS,EAAcY,IACxBlB,EAAUF,EAAAA,EAAAA,UACVnB,EAAgB,CAAC,GAdrB,kDAgB0B,aAAlB,KAAM0C,UACRrB,EAAUF,EAAAA,EAAAA,OACVsB,EAAAA,GAAAA,MAAY,KAAMC,UAlBxB,2DAJc,sBAgCf,GAAE,CAAClC,EAAOR,IAoBX2C,QAAQC,IAAI,YAAa3B,IAEvB,6BACE,SAAC,EAAD,CAAYjB,gBAAiBA,IAC5BoB,IAAWD,EAAAA,EAAAA,YAAqBF,EAAOuB,SACtC,SAAC,EAAD,CAAYvB,OAAQA,MAI3B,C,6FC5ED4B,EAAAA,EAAAA,SAAAA,QADiB,gCAGV,IAAMR,EAAW,mCAAG,oGACzBC,EADyB,EACzBA,YADyB,IAEzB9B,MAAAA,OAFyB,MAEjB,KAFiB,EAGzByB,EAHyB,EAGzBA,WAHyB,UAKFY,EAAAA,EAAAA,GAAMP,EAAa,CACxCQ,OAAQb,EAAWa,OACnBC,OAAQ,CAAEC,QAXE,mCAWgBxC,MAAAA,KAPL,cAKnByC,EALmB,yBASlBA,EAASrB,MATS,2CAAH,qD,sDCNjB,IAAMT,EAAS,CACpB+B,KAAM,OACNC,QAAS,UACTC,SAAU,WACVC,MAAO,Q","sources":["components/MoviesList/MoviesList.jsx","components/SearchForm/SearchForm.jsx","Pages/MoviesPage.jsx","utils/api.js","utils/constans.js"],"sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst MoviesList = () => {\n    const location = useLocation();\n  return (\n    <ul>\n      <li>\n        <Link to={':id'} state={{ from: location }}>Movie-1</Link>\n      </li>\n    </ul>\n  );\n};\n\nexport default MoviesList;\n","import React, { useState } from 'react';\n\nconst SearchForm = ({ setSearchParams }) => {\n  const [querySearch, setQuerySearch] = useState('');\n\n  const onHandleSubmit = e => {\n    e.preventDefault();\n    if (!querySearch.trim()) return;\n    setSearchParams({ query: querySearch.trim().toLowerCase() });\n    setQuerySearch('');\n  };\n\n  const onHandleChange = e => {\n    const { value } = e.currentTarget;\n    setQuerySearch(value);\n  };\n  return (\n    <form onSubmit={onHandleSubmit}>\n      <input\n        type=\"text\"\n        autoComplete=\"off\"\n        autoFocus\n        placeholder=\"Search movies\"\n        value={querySearch}\n        onChange={onHandleChange}\n      />\n      <button type=\"submit\">\n        <span>Search</span>\n      </button>\n    </form>\n  );\n};\n\nexport default SearchForm;\n","import { useEffect, useMemo, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport MoviesList from 'components/MoviesList/MoviesList';\nimport SearchForm from 'components/SearchForm/SearchForm';\nimport { STATUS } from 'utils/constans';\nimport { fetchMovies } from 'utils/api';\nimport { toast } from 'react-hot-toast';\n\nconst MoviePage = () => {\n  // const [query, setQuery] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [status, setStatus] = useState(STATUS.IDLE);\n  const [searchParams, setSearchParams] = useSearchParams();\n  // const queryMovie = searchParams.get('query') ?? '';\n  const { query } = useMemo(\n    () => Object.fromEntries([...searchParams]),\n    [searchParams]\n  );\n\n  useEffect(() => {\n    if (!query) return;\n    const controller = new AbortController();\n\n    async function getMoviesTrend() {\n      try {\n        setStatus(STATUS.PENDING);\n        const {results} = await fetchMovies({\n          controller,\n          fetchParams: 'search/movie',\n          query,\n        });\n        if (results.length === 0) {\n          setStatus(STATUS.RESOLVED);\n          return toast.error('Nothing found!');\n        }\n        setMovies(getSimpleData(results));\n        setStatus(STATUS.RESOLVED);\n        setSearchParams({});\n      } catch (error) {\n        if (error.message !== 'canceled') {\n          setStatus(STATUS.ERROR);\n          toast.error(error.message);\n        }\n      }\n    }\n\n    if (query) getMoviesTrend();\n\n    return () => {\n      controller.abort();\n    };\n  }, [query, setSearchParams]);\n\n  // const updateQueryString = query => {\n  //   const nextParams = query !== '' ? { query } : {};\n  //   setSearchParams(nextParams);\n  // };\n\n  // const onHandleSubmit = e => {\n  //   e.preventDefault();\n  //   if (!queryMovie.trim()) return;\n  //   setSearchParams({ query: queryMovie.trim().toLowerCase() });\n  //   // setQuery(queryText);\n  // };\n\n  function getSimpleData(data) {\n    return data.map(({ id, title }) => {\n      return { id, title };\n    });\n  }\n\n  console.log('movieList', movies);\n  return (\n    <main>\n      <SearchForm setSearchParams={setSearchParams} />\n      {status === STATUS.RESOLVED && !!movies.length && (\n        <MoviesList movies={movies} />\n      )}\n    </main>\n  );\n};\n\nexport default MoviePage;\n","import axios from 'axios';\n\nconst API_KEY = 'fd0a5f8c566fdaa6a63aeafeb4fed4c5';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchMovies = async ({\n  fetchParams,\n  query = null,\n  controller,\n}) => {\n  const response = await axios(fetchParams, {\n    signal: controller.signal,\n    params: { api_key: API_KEY, query },\n  });\n  return response.data;\n};\n","export const STATUS = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  ERROR: 'error',\n};\n"],"names":["location","useLocation","to","state","from","setSearchParams","useState","querySearch","setQuerySearch","onSubmit","e","preventDefault","trim","query","toLowerCase","type","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","movies","setMovies","STATUS","status","setStatus","useSearchParams","searchParams","useMemo","Object","fromEntries","getSimpleData","data","map","id","title","useEffect","controller","AbortController","getMoviesTrend","abort","fetchMovies","fetchParams","results","length","toast","message","console","log","axios","signal","params","api_key","response","IDLE","PENDING","RESOLVED","ERROR"],"sourceRoot":""}